<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Link Shortener</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="container">
    <h1>Link Shortener</h1>
    <p>Enter your long URL below to shorten it</p>

    <form class="url-input-form" action="/add" method="post" enctype="multipart/form-data">
      <label for="url-input">URL</label>
      <input type="url" name="url" id="url-input" required>
      <input type="submit" value="Shorten">
    </form>
    <div>
      <h5 class="redirect-url-header">{{.RedirectUrlHeader}}</h5>
      <a class="redirect-url" href="{{.RedirectUrl}}">{{.RedirectUrl}}</a>
      {{if .RedirectUrl}}
      <button class="copy-btn" id="copy-btn" onclick="copyToClipboard('{{.RedirectUrl}}')">Copy</button>
      <span class="copied-text" id="copied-text" style="display: none;">Copied!</span>
      {{end}}
    </div>
  </div>

  <script>
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(function() {
        // Hide button and show "Copied!" text
        document.getElementById('copy-btn').style.display = 'none';
        document.getElementById('copied-text').style.display = 'inline';
      }).catch(function(err) {
        console.error('Failed to copy: ', err);
      });
    }
  </script>
</body>
</html>
